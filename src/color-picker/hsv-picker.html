<div class="hsv-picker">
  <Slider ref:hue value="{color.hue()}" max="359"/>
  <Spectrum bind:color model="hsv" />
  <Slider ref:alpha value="{color.alpha() * 100}" />
</div>

<style>
  .hsv-picker {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: stretch;
    justify-content: space-around;
  }

  .hsv-picker > :nth-child(2) {
    margin: 0 8px;
    flex: 2 1 auto;
  }
  .hsv-picker > :first-child,
  .hsv-picker > :last-child {
    flex: 0 1 30px;
  }
</style>

<script>
  import Spectrum from './spectrum.html'
  import Slider from './slider.html'

  export default {
    components: {
      Spectrum,
      Slider,
    },
    data () {
      return {
        color: '#000',
      }
    },
    computed: {
      textColor: ({ color }) => color.isDark() ? '#fff' : '#000',
    },
    oncreate () {
      this.refs.hue.on('state', ({ changed, current, previous }) => {
        if (changed.value) {
          const {color} = this.get()
          this.set({color: color.hue(current.value)})
        }
      })
      this.refs.alpha.on('state', ({ changed, current, previous }) => {
        if (changed.value) {
          const {color} = this.get()
          this.set({color: color.alpha(current.value / 100)})
        }
      })
    },
    onupdate ({ changed, current }) {
      if (changed.color) {
        const alphaColor = (alpha) => current.color.hsv().alpha(alpha).string()
        this.refs.alpha.draw(alphaColor(0), alphaColor(1))
      }
    },
  }
</script>
